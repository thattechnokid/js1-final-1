var newInput=document.getElementById("new-task"),addBtn=document.getElementsByTagName("span")[0],incompleteTaskList=document.getElementById("incomplete-tasks"),completeTaskList=document.getElementById("completed-tasks"),createNewTodo=function(todoString){var listItem=document.createElement("li"),checkBox=document.createElement("input"),label=document.createElement("label"),editInput=document.createElement("input"),editBtn=document.createElement("button"),deleteBtn=document.createElement("button");return checkBox.type="checkbox",editInput.type="text",editBtn.innerText="Edit",editBtn.className="edit",deleteBtn.innerText="Delete",deleteBtn.className="delete",label.innerText=todoString,listItem.appendChild(checkBox),listItem.appendChild(label),listItem.appendChild(editInput),listItem.appendChild(editBtn),listItem.appendChild(deleteBtn),listItem},addTask=function(){console.log("Add task...");var listItem=createNewTodo(newInput.value);incompleteTaskList.appendChild(listItem),bindTaskEvents(listItem,taskCompleted),newInput.value=""},editTask=function(){console.log("Edit task");var listItem=this.parentNode,editInput=listItem.querySelector("input[type=text]"),label=listItem.querySelector("label");listItem.classList.contains("editMode")?label.innerText=editInput.value:editInput.value=label.innerText,listItem.classList.toggle("editMode")},deleteTask=function(){console.log("delete task");var listItem=this.parentNode;listItem.parentNode.removeChild(listItem)},taskCompleted=function(){console.log("complete task");var listItem=this.parentNode;completeTaskList.appendChild(listItem),bindTaskEvents(listItem,taskIncomplete)},taskIncomplete=function(){console.log("incomplete task");var listItem=this.parentNode;incompleteTaskList.appendChild(listItem),bindTaskEvents(listItem,taskCompleted)},bindTaskEvents=function(taskListItem,checkBoxEventHandler){console.log("bind li events");var checkBox=taskListItem.querySelector("input[type=checkbox]"),editBtn=taskListItem.querySelector("button.edit"),deleteBtn=taskListItem.querySelector("button.delete");editBtn.onclick=editTask,deleteBtn.onclick=deleteTask,checkBox.onchange=checkBoxEventHandler},ajaxRequest=function(){console.log("AJAX request")};addBtn.addEventListener("click",addTask),addBtn.addEventListener("click",ajaxRequest);for(var i=0;i<incompleteTaskList.children.length;i+=1)bindTaskEvents(incompleteTaskList.children[i],taskCompleted);for(i=0;i<completeTaskList.children.length;i+=1)bindTaskEvents(completeTaskList.children[i],taskIncomplete);newInput.addEventListener("keyup",function(event){13===event.which&&addTask()});